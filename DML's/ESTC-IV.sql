CREATE SCHEMA EST_CASO_IV;
USE ESTC_IV; 

CREATE TABLE IF NOT EXISTS ALUNOS (
    ALUNO_ID INT PRIMARY KEY,
    ALUNO_CPF VARCHAR(14) NOT NULL,
    ALUNO_NOME VARCHAR(100) NOT NULL,
    ALUNO_DATANASC DATE NOT NULL,
    ALUNO_RUA VARCHAR(100) NOT NULL,
    ALUNO_NUM INT,
    ALUNO_COMPLEMENTO TEXT,
    ALUNO_BAIRRO VARCHAR(100) NOT NULL,
    ALUNO_CIDADE VARCHAR(100) NOT NULL,
    ALUNO_CEP VARCHAR(15) NOT NULL,
    ALUNO_UF CHAR(2) NOT NULL,
    ALUNO_PAIS VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS INSTRUTORES (
    INSTRU_ID INT PRIMARY KEY,
    INSTRU_CPF VARCHAR(14) NOT NULL,
    INSTRU_NOME VARCHAR(100) NOT NULL,
    INSTRU_DATANASC DATE NOT NULL,
    INSTRU_RUA VARCHAR(100) NOT NULL,
    INSTRU_NUM INT,
    INSTRU_COMPLEMENTO TEXT,
    INSTRU_BAIRRO VARCHAR(100) NOT NULL,
    INSTRU_CIDADE VARCHAR(100) NOT NULL,
    INSTRU_CEP VARCHAR(15) NOT NULL,
    INSTRU_UF CHAR(2) NOT NULL,
    INSTRU_PAIS VARCHAR(100) NOT NULL,
    INSTRU_ESPECIALIDADE VARCHAR(100) NOT NULL
);


CREATE TABLE IF NOT EXISTS MODALIDADES (
    MOD_ID INT PRIMARY KEY,
    MOD_NOME VARCHAR(100) NOT NULL,
    MOD_DESCRICAO TEXT NOT NULL
);


CREATE TABLE IF NOT EXISTS PLANOS_TREINAMENTOS (
    PLAN_ID INT PRIMARY KEY,
    ALUNO_ID INT NOT NULL,
    INSTRU_ID INT NOT NULL,
    PLAN_DESCRICAO TEXT NOT NULL,
    PLAN_DATAINICIO DATE NOT NULL,
    PLAN_DATAFIM DATE,
    CONSTRAINT PLTR_FK_ALUNO FOREIGN KEY(ALUNO_ID) REFERENCES ALUNOS(ALUNO_ID),
    CONSTRAINT PLTR_FK_INSTRUTOR FOREIGN KEY(INSTRU_ID) REFERENCES INSTRUTORES(INSTRU_ID)
);

CREATE TABLE IF NOT EXISTS AULAS (
    AULA_ID INT PRIMARY KEY,
    MOD_ID INT NOT NULL,
    INSTRU_ID INT NOT NULL,
    AULA_HORARIO TIME NOT NULL,
    AULA_CAPACIDADE INT NOT NULL,
    CONSTRAINT AULAS_FK_MODALIDADES FOREIGN KEY (MOD_ID) REFERENCES MODALIDADES(MOD_ID),
    CONSTRAINT AULAS_FK_INSTRUTORES FOREIGN KEY (INSTRU_ID) REFERENCES INSTRUTORES(INSTRU_ID)
);


CREATE TABLE IF NOT EXISTS MATRICULAS (
    MATRICULA_ID INT PRIMARY KEY,
    ALUNO_ID INT NOT NULL,
    MOD_ID INT NOT NULL,
    MATRICULA_DATA DATE NOT NULL,
    MATRICULA_STATUS ENUM("MATRICULADO", "NAO MATRICULADO"),
    CONSTRAINT MATRICULA_FK_ALUNOS FOREIGN KEY (ALUNO_ID) REFERENCES ALUNOS(ALUNO_ID),
    CONSTRAINT MATRICULA_FK_MODALIDADES FOREIGN KEY (MOD_ID) REFERENCES MODALIDADES(MOD_ID)

);

CREATE TABLE IF NOT EXISTS PAGAMENTOS (
    PAG_ID INT PRIMARY KEY,
    PAG_DATA DATE NOT NULL,
    PAG_VALOR DECIMAL(10, 3) NOT NULL,
    PAG_STATUS ENUM("PAGO", "PENDENTE"),
	MATRICULA_ID INT,
    CONSTRAINT PAG_FK_MATRICULAS FOREIGN KEY(MATRICULA_ID) REFERENCES MATRICULAS(MATRICULA_ID)
);

CREATE TABLE IF NOT EXISTS ALUNOS_AULAS (
    AULA_ID INT,
    ALUNO_ID INT,
    PRIMARY KEY(AULA_ID, ALUNO_ID),
    CONSTRAINT ALAU_FK_AULAS FOREIGN KEY(AULA_ID) REFERENCES AULAS(AULA_ID),
    CONSTRAINT ALAU_FK_ALUNOS FOREIGN KEY(ALUNO_ID) REFERENCES ALUNOS(ALUNO_ID) 
);

-- -------------------- TABELA ALUNOS --------------------

-- Inserts para a Tabela ALUNOS

INSERT INTO ALUNOS (ALUNO_ID, ALUNO_CPF, ALUNO_NOME, ALUNO_DATANASC, ALUNO_RUA, ALUNO_NUM, ALUNO_COMPLEMENTO, ALUNO_BAIRRO, ALUNO_CIDADE, ALUNO_CEP, ALUNO_UF, ALUNO_PAIS)
VALUES
(1, '123.456.789-00', 'João Silva', '2000-05-15', 'Rua das Flores', 123, 'Apto 101', 'Centro', 'São Paulo', '01001-000', 'SP', 'Brasil'),
(2, '987.654.321-00', 'Maria Souza', '1998-03-22', 'Avenida Paulista', 1500, NULL, 'Bela Vista', 'São Paulo', '01310-100', 'SP', 'Brasil'),
(3, '111.222.333-44', 'Carlos Oliveira', '2001-07-10', 'Rua Augusta', 55, 'Bloco A', 'Jardins', 'São Paulo', '01410-000', 'SP', 'Brasil'),
(4, '555.666.777-88', 'Ana Costa', '1997-11-30', 'Rua das Acácias', 410, 'Apto 303', 'Vila Progresso', 'São Paulo', '02510-100', 'SP', 'Brasil'),
(5, '444.555.666-77', 'Lucas Pereira', '2002-01-25', 'Avenida Brasil', 800, 'Apto 201', 'Vila Mariana', 'São Paulo', '04080-001', 'SP', 'Brasil');

-- Updates para a Tabela ALUNOS

UPDATE ALUNOS SET ALUNO_NOME = 'João Pedro Silva' WHERE ALUNO_ID = 1;
UPDATE ALUNOS SET ALUNO_COMPLEMENTO = 'Apto 202' WHERE ALUNO_ID = 2;
UPDATE ALUNOS SET ALUNO_RUA = 'Rua do Rio' WHERE ALUNO_ID = 3;
UPDATE ALUNOS SET ALUNO_BAIRRO = 'Vila Madalena' WHERE ALUNO_ID = 4;
UPDATE ALUNOS SET ALUNO_CIDADE = 'Campinas' WHERE ALUNO_ID = 5;


-- -------------------- TABELA INSTRUTORES --------------------

-- Inserts para a Tabela INSTRUTORES

INSERT INTO INSTRUTORES (INSTRU_ID, INSTRU_CPF, INSTRU_NOME, INSTRU_DATANASC, INSTRU_RUA, INSTRU_NUM, INSTRU_COMPLEMENTO, INSTRU_BAIRRO, INSTRU_CIDADE, INSTRU_CEP, INSTRU_UF, INSTRU_PAIS, INSTRU_ESPECIALIDADE)
VALUES
(1, '222.333.444-55', 'Roberto Lima', '1985-08-30', 'Rua das Palmeiras', 100, 'Sala 5', 'Centro', 'São Paulo', '01100-000', 'SP', 'Brasil', 'Musculação'),
(2, '333.444.555-66', 'Fernanda Santos', '1987-02-10', 'Avenida Faria Lima', 2000, NULL, 'Pinheiros', 'São Paulo', '04510-011', 'SP', 'Brasil', 'Yoga'),
(3, '444.555.666-77', 'Ricardo Almeida', '1990-11-05', 'Rua dos Três Irmãos', 500, 'Bloco B', 'Vila Progredir', 'São Paulo', '03040-000', 'SP', 'Brasil', 'Pilates'),
(4, '555.666.777-88', 'Mariana Oliveira', '1992-03-22', 'Rua Xavantes', 350, 'Sala 6', 'Tatuapé', 'São Paulo', '03050-040', 'SP', 'Brasil', 'Crossfit'),
(5, '666.777.888-99', 'Carlos Eduardo', '1988-12-15', 'Avenida 9 de Julho', 1500, NULL, 'Brooklin', 'São Paulo', '04560-000', 'SP', 'Brasil', 'Boxe');

-- Updates para a Tabela INSTRUTORES

UPDATE INSTRUTORES SET INSTRU_ESPECIALIDADE = 'Treinamento Funcional' WHERE INSTRU_ID = 1;
UPDATE INSTRUTORES SET INSTRU_NUM = 500 WHERE INSTRU_ID = 2;
UPDATE INSTRUTORES SET INSTRU_RUA = 'Rua Nova' WHERE INSTRU_ID = 3;
UPDATE INSTRUTORES SET INSTRU_BAIRRO = 'Itaim Bibi' WHERE INSTRU_ID = 4;
UPDATE INSTRUTORES SET INSTRU_CIDADE = 'Campinas' WHERE INSTRU_ID = 5;


-- -------------------- TABELA MODALIDADES --------------------

-- Inserts para a Tabela MODALIDADES

INSERT INTO MODALIDADES (MOD_ID, MOD_NOME, MOD_DESCRICAO)
VALUES
(1, 'Musculação', 'Treinamento de força para ganho de massa muscular e resistência'),
(2, 'Yoga', 'Prática de posturas físicas e técnicas de respiração para bem-estar'),
(3, 'Pilates', 'Método de exercícios que visa a melhora da postura e força muscular'),
(4, 'Crossfit', 'Treinamento físico baseado em exercícios funcionais e de alta intensidade'),
(5, 'Boxe', 'Esporte de combate que envolve socos e técnicas de defesa');

-- Updates para a Tabela MODALIDADES

UPDATE MODALIDADES SET MOD_DESCRICAO = 'Treinamento de força e resistência muscular' WHERE MOD_ID = 1;
UPDATE MODALIDADES SET MOD_NOME = 'Hatha Yoga' WHERE MOD_ID = 2;
UPDATE MODALIDADES SET MOD_NOME = 'Pilates Clínico' WHERE MOD_ID = 3;
UPDATE MODALIDADES SET MOD_DESCRICAO = 'Treinamento intenso com exercícios funcionais' WHERE MOD_ID = 4;
UPDATE MODALIDADES SET MOD_DESCRICAO = 'Treinamento de socos e técnicas de combate' WHERE MOD_ID = 5;


-- -------------------- TABELA PLANOS_TREINAMENTOS --------------------

-- Inserts para a Tabela PLANOS_TREINAMENTOS

INSERT INTO PLANOS_TREINAMENTOS (PLAN_ID, ALUNO_ID, INSTRU_ID, PLAN_DESCRICAO, PLAN_DATAINICIO, PLAN_DATAFIM)
VALUES
(1, 1, 1, 'Plano para ganho de massa muscular', '2024-01-01', '2024-06-01'),
(2, 2, 2, 'Plano para melhorar flexibilidade', '2024-02-01', '2024-07-01'),
(3, 3, 3, 'Plano para melhorar postura e força', '2024-03-01', '2024-08-01'),
(4, 4, 4, 'Plano para treinamento funcional', '2024-04-01', '2024-09-01'),
(5, 5, 5, 'Plano para preparação no boxe', '2024-05-01', '2024-10-01');

-- Updates para a Tabela PLANOS_TREINAMENTOS

UPDATE PLANOS_TREINAMENTOS SET PLAN_DESCRICAO = 'Plano intensivo de musculação' WHERE PLAN_ID = 1;
UPDATE PLANOS_TREINAMENTOS SET PLAN_DATAFIM = '2024-12-01' WHERE PLAN_ID = 2;
UPDATE PLANOS_TREINAMENTOS SET PLAN_DATAINICIO = '2024-04-01' WHERE PLAN_ID = 3;
UPDATE PLANOS_TREINAMENTOS SET PLAN_DESCRICAO = 'Plano de resistência e força' WHERE PLAN_ID = 4;
UPDATE PLANOS_TREINAMENTOS SET PLAN_DATAINICIO = '2024-06-01' WHERE PLAN_ID = 5;


-- -------------------- TABELA AULAS --------------------

-- Inserts para a Tabela AULAS

INSERT INTO AULAS (AULA_ID, MOD_ID, INSTRU_ID, AULA_HORARIO, AULA_CAPACIDADE)
VALUES
(1, 1, 1, '08:00:00', 20),
(2, 2, 2, '09:00:00', 15),
(3, 3, 3, '10:00:00', 10),
(4, 4, 4, '11:00:00', 25),
(5, 5, 5, '12:00:00', 30);

-- Updates para a Tabela AULAS

UPDATE AULAS SET AULA_HORARIO = '07:00:00' WHERE AULA_ID = 1;
UPDATE AULAS SET AULA_CAPACIDADE = 18 WHERE AULA_ID = 2;
UPDATE AULAS SET AULA_HORARIO = '10:30:00' WHERE AULA_ID = 3;
UPDATE AULAS SET AULA_CAPACIDADE = 22 WHERE AULA_ID = 4;
UPDATE AULAS SET AULA_HORARIO =

