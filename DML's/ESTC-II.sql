CREATE SCHEMA EMPRESA_AEREA;
USE EMPRESA_AEREA;


-- -------------------- PASSAGEIROS --------------------
CREATE TABLE IF NOT EXISTS PASSAGEIROS (
    PASS_CPF VARCHAR(14) PRIMARY KEY,
    PASS_NOME VARCHAR(50) NOT NULL,
    PASS_TELEFONE VARCHAR(15) NOT NULL,
    PASS_RUA VARCHAR(100) NOT NULL,
    PASS_NUMRUA INT,
    PASS_BAIRRO VARCHAR(50) NOT NULL,
    PASS_CIDADE VARCHAR(50) NOT NULL,
    PASS_ESTADO VARCHAR(50) NOT NULL,
    PASS_PAIS VARCHAR(50) NOT NULL,
    PASS_CODPOSTAL VARCHAR(10) NOT NULL,
    PASS_EMAIL VARCHAR(50) NOT NULL
);

-- -------------------- FUNCIONARIOS --------------------

CREATE TABLE IF NOT EXISTS FUNCIONARIOS (
    FUNC_ID INT PRIMARY KEY,
    FUNC_CPF VARCHAR(14) NOT NULL,
    FUNC_NOME VARCHAR(50) NOT NULL,
    FUNC_DATANASC DATE NOT NULL,
    FUNC_RUA VARCHAR(100) NOT NULL,
    FUNC_NUMRUA INT,
    FUNC_BAIRRO VARCHAR(50) NOT NULL,
    FUNC_CIDADE VARCHAR(50) NOT NULL,
    FUNC_ESTADO VARCHAR(50) NOT NULL,
    FUNC_PAIS VARCHAR(50) NOT NULL,
    FUNC_CODPOSTAL VARCHAR(10) NOT NULL
);

-- -------------------- AERONAVES --------------------

CREATE TABLE IF NOT EXISTS AERONAVES (
    AERON_PREFIXO VARCHAR(10) PRIMARY KEY,
    AERON_MODELO VARCHAR(50) NOT NULL,
    AERON_FABRICANTE VARCHAR(50) NOT NULL,
    AERON_ANOFABR YEAR NOT NULL,
    AERON_CAPACIDADE TEXT NOT NULL,
    AERON_AUTONOMIA VARCHAR(10) NOT NULL
);

-- -------------------- AEROPORTOS --------------------

CREATE TABLE IF NOT EXISTS AEROPORTOS (
    AEROP_CODIGO INT PRIMARY KEY,
    AEROP_NOME VARCHAR(50) NOT NULL,
    AEROP_CIDADE VARCHAR(50) NOT NULL,
    AEROP_PAIS VARCHAR(50) NOT NULL,
    AEROP_LATITUDE TEXT NOT NULL,
    AEROP_LONGITUDE TEXT NOT NULL
);

-- -------------------- VOOS --------------------

CREATE TABLE IF NOT EXISTS VOOS (
    VOO_ID INT PRIMARY KEY,
    VOO_DATA DATE NOT NULL,
    VOO_HORA TIME NOT NULL,
    VOO_AEROP_ORIGEM INT NOT NULL,
    VOO_AEROP_DESTINO INT NOT NULL,
    VOO_AERONAVE VARCHAR(10) NOT NULL,
    CONSTRAINT FK_AEROP_ORIGEM FOREIGN KEY(VOO_AEROP_ORIGEM) REFERENCES AEROPORTOS(AEROP_CODIGO),
    CONSTRAINT FK_AEROP_DESTINO FOREIGN KEY(VOO_AEROP_DESTINO) REFERENCES AEROPORTOS(AEROP_CODIGO),
    CONSTRAINT FK_AERONAVE FOREIGN KEY(VOO_AERONAVE) REFERENCES AERONAVES(AERON_PREFIXO)
);

-- -------------------- EQUIPES --------------------

CREATE TABLE IF NOT EXISTS EQUIPES (
    VOO_ID INT NOT NULL,
    FUNC_ID INT NOT NULL,
    PRIMARY KEY(VOO_ID, FUNC_ID),
    CONSTRAINT VOFU_FK_VOO FOREIGN KEY(VOO_ID) REFERENCES VOOS(VOO_ID),
    CONSTRAINT VOFU_FK_FUNCIONARIO FOREIGN KEY(FUNC_ID) REFERENCES FUNCIONARIOS(FUNC_ID)
);

-- -------------------- RESREVAS --------------------

CREATE TABLE IF NOT EXISTS RESERVAS (
    RESERVA_COD INT PRIMARY KEY,
    VOO_ID INT NOT NULL,
    PASS_CPF VARCHAR(14) NOT NULL,
    CONSTRAINT FK_PASSAGEIROS FOREIGN KEY(PASS_CPF) REFERENCES PASSAGEIROS(PASS_CPF),
    CONSTRAINT FK_VOOS FOREIGN KEY(VOO_ID) REFERENCES VOOS(VOO_ID)
);



-- =====================> INSERTS <=====================

-- INSERTS para a tabela PASSAGEIROS

INSERT INTO PASSAGEIROS (PASS_CPF, PASS_NOME, PASS_TELEFONE, PASS_RUA, PASS_NUMRUA, PASS_BAIRRO, PASS_CIDADE, PASS_ESTADO, PASS_PAIS, PASS_CODPOSTAL, PASS_EMAIL)
VALUES 
('12345678901', 'Frodo Bolseiro', '11987654321', 'Madrugada da Comarca', 123, 'Bolseiros', 'Comarca', 'Condado', 'Terra-média', '01234-567', 'frodo.bolseiro@email.com'),
('23456789012', 'Arwen Evenstar', '21987654321', 'Avenida Rivendel', 456, 'Jardim Elven', 'Rivendel', 'Terra-média', 'Terra-média', '02345-678', 'arwen.evenstar@email.com'),
('34567890123', 'Gimli Filho de Glóin', '31987654321', 'Rua dos Anões', 789, 'Caverna de Moria', 'Moria', 'Terra-média', 'Terra-média', '03456-789', 'gimli.moria@email.com'),
('45678901234', 'Legolas Verdefloresta', '41987654321', 'Rua das Folhas', 101, 'Bosque Verde', 'Floresta das Lothlórien', 'Terra-média', 'Terra-média', '04567-890', 'legolas.lothlorien@email.com'),
('56789012345', 'Gandalf Cinzento', '51987654321', 'Rua da Magia', 202, 'Vila dos Magos', 'Isengard', 'Terra-média', 'Terra-média', '05678-901', 'gandalf.cinzento@email.com');



-- INSERTS para a tabela FUNCIONARIOS

INSERT INTO FUNCIONARIOS (FUNC_ID, FUNC_CPF, FUNC_NOME, FUNC_DATANASC, FUNC_RUA, FUNC_NUMRUA, FUNC_BAIRRO, FUNC_CIDADE, FUNC_ESTADO, FUNC_PAIS, FUNC_CODPOSTAL)
VALUES 
(1, '12345678901', 'Aragorn Filho de Arathorn', '1985-02-15', 'Rua do Rei', 123, 'Centro', 'Gondor', 'Gondor', 'Terra-média', '01234-567'),
(2, '23456789012', 'Gimli Filho de Glóin', '1990-06-20', 'Avenida das Pedras', 456, 'Caverna de Moria', 'Moria', 'Terra-média', 'Terra-média', '02345-678'),
(3, '34567890123', 'Boromir de Gondor', '1988-08-10', 'Rua do Senhor de Gondor', 789, 'Porto de Gondor', 'Gondor', 'Terra-média', 'Terra-média', '03456-789'),
(4, '45678901234', 'Galadriel Rainha de Lothlórien', '1992-04-22', 'Rua das Estrelas', 101, 'Lothlórien', 'Lothlórien', 'Terra-média', 'Terra-média', '04567-890'),
(5, '56789012345', 'Faramir Filho de Denethor', '1987-11-30', 'Rua da Vigilância', 202, 'Minas Tirith', 'Gondor', 'Terra-média', 'Terra-média', '05678-901');



-- INSERTS para a tabela AERONAVES

INSERT INTO AERONAVES (AERON_PREFIXO, AERON_MODELO, AERON_FABRICANTE, AERON_ANOFABR, AERON_CAPACIDADE, AERON_AUTONOMIA)
VALUES 
('PR-FRO', 'Grifo de Gwaihir', 'Gwaihir', 2015, '180 passageiros', '6000 km'),
('PR-ARW', 'Águia de Rivendel', 'Rivendel', 2017, '150 passageiros', '5500 km'),
('PR-GIM', 'Navio de Durin', 'Anões de Moria', 2018, '120 passageiros', '4500 km'),
('PR-LEG', 'Falcão de Lothlórien', 'Elfos', 2014, '350 passageiros', '13000 km'),
('PR-GAN', 'Pássaro de Gandalf', 'Gandalf', 2019, '250 passageiros', '11000 km');



-- INSERTS para a tabela AEROPORTOS

INSERT INTO AEROPORTOS (AEROP_CODIGO, AEROP_NOME, AEROP_CIDADE, AEROP_PAIS, AEROP_LATITUDE, AEROP_LONGITUDE)
VALUES 
(1, 'Porto de Gondor', 'Minas Tirith', 'Gondor', '-23.4344', '-46.4696'),
(2, 'Aeroporto de Rivendel', 'Rivendel', 'Terra-média', '-22.9123', '-43.1631'),
(3, 'Aeroporto de Moria', 'Moria', 'Terra-média', '-19.8558', '-43.9649'),
(4, 'Aeroporto de Lothlórien', 'Lothlórien', 'Terra-média', '-25.5201', '-49.1753'),
(5, 'Aeroporto de Isengard', 'Isengard', 'Terra-média', '-3.7764', '-38.5327');



-- -------------------- VOOS --------------------

INSERT INTO VOOS (VOO_ID, VOO_DATA, VOO_HORA, VOO_AEROP_ORIGEM, VOO_AEROP_DESTINO, VOO_AERONAVE)
VALUES 
(1, '2024-12-10', '08:00:00', 1, 2, 'PR-FRO'),
(2, '2024-12-12', '14:30:00', 2, 3, 'PR-ARW'),
(3, '2024-12-15', '18:45:00', 3, 4, 'PR-GIM'),
(4, '2024-12-18', '10:30:00', 4, 5, 'PR-LEG'),
(5, '2024-12-20', '13:00:00', 5, 1, 'PR-GAN');

-- -------------------- EQUIPES --------------------

INSERT INTO EQUIPES (VOO_ID, FUNC_ID)
VALUES 
(1, 1),
(1, 2),
(2, 3),
(2, 4),
(3, 5);

-- -------------------- RESERVAS --------------------

INSERT INTO RESERVAS (RESERVA_COD, VOO_ID, PASS_CPF)
VALUES 
(1, 1, '12345678901'),
(2, 2, '23456789012'),
(3, 3, '34567890123'), 
(4, 4, '45678901234'), 
(5, 5, '56789012345');



-- =====================> UPDATES <=====================

-- Tabela PASSAGEIROS

UPDATE PASSAGEIROS SET PASS_TELEFONE = '11999999999' WHERE PASS_CPF = '12345678901';
UPDATE PASSAGEIROS SET PASS_EMAIL = 'arwen.evenstar@terra-media.com' WHERE PASS_CPF = '23456789012';



-- Tabela FUNCIONARIOS

UPDATE FUNCIONARIOS SET FUNC_NOME = 'Aragorn Rei de Gondor' WHERE FUNC_CPF = '12345678901';
UPDATE FUNCIONARIOS SET FUNC_CIDADE = 'Valinor' WHERE FUNC_CPF = '45678901234';



-- Tabela AERONAVES

UPDATE AERONAVES SET AERON_CAPACIDADE = '200 passageiros' WHERE AERON_PREFIXO = 'PR-FRO';
UPDATE AERONAVES SET AERON_ANOFABR = 2020 WHERE AERON_PREFIXO = 'PR-ARW';



-- Tabela AEROPORTOS

UPDATE AEROPORTOS SET AEROP_NOME = 'Porto de Gondor Internacional' WHERE AEROP_CODIGO = 1;
UPDATE AEROPORTOS SET AEROP_CIDADE = 'Valinor' WHERE AEROP_CODIGO = 4;



-- Tabela VOOS

UPDATE VOOS SET VOO_HORA = '12:00:00' WHERE VOO_ID = 1;
UPDATE VOOS SET VOO_DATA = '2024-12-22' WHERE VOO_ID = 5;



-- Tabela EQUIPES

UPDATE EQUIPES SET FUNC_ID = 3 WHERE VOO_ID = 1 AND FUNC_ID = 2;
UPDATE EQUIPES SET FUNC_ID = 4 WHERE VOO_ID = 2 AND FUNC_ID = 3;



-- Tabela RESERVAS

UPDATE RESERVAS SET PASS_CPF = '56789012345' WHERE RESERVA_COD = 1;
UPDATE RESERVAS SET VOO_ID = 4 WHERE RESERVA_COD = 3;



-- =====================> DELETES <=====================

-- Tabela PASSAGEIROS

DELETE FROM PASSAGEIROS WHERE PASS_CPF = '12345678901';



-- Tabela FUNCIONARIOS

DELETE FROM FUNCIONARIOS WHERE FUNC_CPF = '12345678901';



-- Tabela AERONAVES

DELETE FROM AERONAVES WHERE AERON_PREFIXO = 'PR-FRO';



-- Tabela AEROPORTOS

DELETE FROM AEROPORTOS WHERE AEROP_CODIGO = 1;



-- Tabela VOOS

DELETE FROM VOOS WHERE VOO_ID = 1;



-- Tabela EQUIPES

DELETE FROM EQUIPES WHERE VOO_ID = 1 AND FUNC_ID = 2;



-- Tabela RESERVAS

DELETE FROM RESERVAS WHERE RESERVA_COD = 1;



