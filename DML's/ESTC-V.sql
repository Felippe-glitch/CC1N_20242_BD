CREATE SCHEMA EST_CASO_V;

USE EST_CASO_V;

-- TABELA DE CLIENTES
CREATE TABLE IF NOT EXISTS CLIENTES (
    CLI_CPF VARCHAR(14) PRIMARY KEY,
    CLI_NOME VARCHAR(100) NOT NULL,
    CLI_RUA VARCHAR(50),
    CLI_NUMRUA VARCHAR(25) NOT NULL,
    CLI_BAIRRO VARCHAR(50) NOT NULL,
    CLI_CIDADE VARCHAR(50) NOT NULL,
    CLI_UF CHAR(2) NOT NULL,
    CLI_PAIS VARCHAR(100) NOT NULL,
    CLI_CEP VARCHAR(15) NOT NULL,
    CLI_STATUS_PROMO ENUM('APROVADO', 'REPROVADO') NOT NULL
);

-- TABELA DE FORNECEDORES
CREATE TABLE IF NOT EXISTS FORNECEDORES (
    FORN_CNPJ VARCHAR(14) PRIMARY KEY,
    FORN_NOME VARCHAR(100) NOT NULL,
    FORN_TELEFONE VARCHAR(16) NOT NULL,
    FORN_EMAIL VARCHAR(50) NOT NULL
);

-- TABELA DE PRODUTOS
CREATE TABLE IF NOT EXISTS PRODUTOS (
    PROD_ID INT PRIMARY KEY,
    PROD_CATEGORIA VARCHAR(50) NOT NULL,
    PROD_QTDDISPONIVEL INT NOT NULL,
    PROD_PRECO DECIMAL(10, 3) NOT NULL
);

-- TABELA ASSOCIATIVA ENTRE PRODUTOS E FORNECEDORES
CREATE TABLE IF NOT EXISTS PRODUTOS_FORNECEDORES (
    PROD_ID INT,
    FORN_CNPJ VARCHAR(14),
    PRIMARY KEY (PROD_ID, FORN_CNPJ),
    CONSTRAINT PRFO_FK_PRODUTOS FOREIGN KEY (PROD_ID) REFERENCES PRODUTOS(PROD_ID),
    CONSTRAINT PRFO_FK_FORNECEDORES FOREIGN KEY (FORN_CNPJ) REFERENCES FORNECEDORES(FORN_CNPJ)
);

-- TABELA DE PAGAMENTOS
CREATE TABLE IF NOT EXISTS PAGAMENTOS (
    PAG_ID INT PRIMARY KEY,
    PAG_DATA DATE NOT NULL,
    PAG_HORA TIME NOT NULL,
    PAG_VALOR DECIMAL(10, 3) NOT NULL,
    PAG_STATUS ENUM('PENDENTE', 'PAGO', 'CANCELADO') NOT NULL
);

-- TABELA DE VENDAS
CREATE TABLE IF NOT EXISTS VENDAS (
    VENDA_ID INT PRIMARY KEY,
    CLI_CPF VARCHAR(14) NOT NULL,
    PAG_ID INT NOT NULL,
    CONSTRAINT VENDA_FK_CLIENTES FOREIGN KEY (CLI_CPF) REFERENCES CLIENTES(CLI_CPF),
    CONSTRAINT VENDA_FK_PAGAMENTOS FOREIGN KEY (PAG_ID) REFERENCES PAGAMENTOS(PAG_ID)
);

-- TABELA ASSOCIATIVA ENTRE VENDAS E PRODUTOS
CREATE TABLE IF NOT EXISTS VENDAS_PRODUTOS (
    VENDA_ID INT,
    PROD_ID INT,
    PRIMARY KEY (VENDA_ID, PROD_ID),
    VEPRO_QTD_VENDIDA INT NOT NULL,
    VEPRO_VALORTOTAL DECIMAL(10, 3) NOT NULL,
    CONSTRAINT VEPRO_FK_PRODUTOS FOREIGN KEY (PROD_ID) REFERENCES PRODUTOS(PROD_ID),
    CONSTRAINT VEPRO_FK_VENDAS FOREIGN KEY (VENDA_ID) REFERENCES VENDAS(VENDA_ID)
);

-- ----------------------------------------------------------------INSERTS----------------------------------------------------------------



-- Inserts para a Tabela CLIENTES

INSERT INTO CLIENTES (CLI_CPF, CLI_NOME, CLI_RUA, CLI_NUMRUA, CLI_BAIRRO, CLI_CIDADE, CLI_UF, CLI_PAIS, CLI_CEP, CLI_STATUS_PROMO)
VALUES
('123.456.789-00', 'João Silva', 'Rua das Flores', '123', 'Centro', 'São Paulo', 'SP', 'Brasil', '01001-000', 'APROVADO'),
('987.654.321-00', 'Maria Souza', 'Avenida Paulista', '1500', 'Bela Vista', 'São Paulo', 'SP', 'Brasil', '01310-100', 'REPROVADO'),
('111.222.333-44', 'Carlos Oliveira', 'Rua Augusta', '55', 'Jardins', 'São Paulo', 'SP', 'Brasil', '01410-000', 'APROVADO'),
('555.666.777-88', 'Ana Costa', 'Rua das Acácias', '410', 'Vila Progresso', 'São Paulo', 'SP', 'Brasil', '02510-100', 'APROVADO'),
('444.555.666-77', 'Lucas Pereira', 'Avenida Brasil', '800', 'Vila Mariana', 'São Paulo', 'SP', 'Brasil', '04080-001', 'REPROVADO');



-- Inserts para a Tabela FORNECEDORES

INSERT INTO FORNECEDORES (FORN_CNPJ, FORN_NOME, FORN_TELEFONE, FORN_EMAIL)
VALUES
('12.345.678/0001-90', 'Fornecedor A', '(11) 98765-4321', 'contato@fornecedora.com'),
('23.456.789/0001-01', 'Fornecedor B', '(11) 98876-5432', 'vendas@fornecedorb.com'),
('34.567.890/0001-12', 'Fornecedor C', '(21) 99988-7766', 'suporte@fornecedorc.com'),
('45.678.901/0001-23', 'Fornecedor D', '(11) 99777-6655', 'contato@fornecedord.com'),
('56.789.012/0001-34', 'Fornecedor E', '(31) 98887-5544', 'vendas@fornecedore.com');



-- Inserts para a Tabela PRODUTOS

INSERT INTO PRODUTOS (PROD_ID, PROD_CATEGORIA, PROD_QTDDISPONIVEL, PROD_PRECO)
VALUES
(1, 'Eletrônicos', 50, 1999.99),
(2, 'Móveis', 30, 799.50),
(3, 'Roupas', 150, 120.00),
(4, 'Alimentos', 200, 9.99),
(5, 'Livros', 100, 59.90);



-- -------------------- TABELA PRODUTOS_FORNECEDORES --------------------

-- Inserts para a Tabela PRODUTOS_FORNECEDORES
INSERT INTO PRODUTOS_FORNECEDORES (PROD_ID, FORN_CNPJ)
VALUES
(1, '12.345.678/0001-90'),
(2, '23.456.789/0001-01'),
(3, '34.567.890/0001-12'),
(4, '45.678.901/0001-23'),
(5, '56.789.012/0001-34');



-- Inserts para a Tabela PAGAMENTOS

INSERT INTO PAGAMENTOS (PAG_ID, PAG_DATA, PAG_HORA, PAG_VALOR, PAG_STATUS)
VALUES
(1, '2024-05-10', '10:30:00', 2000.00, 'PAGO'),
(2, '2024-05-11', '14:45:00', 500.00, 'PENDENTE'),
(3, '2024-05-12', '09:00:00', 120.00, 'CANCELADO'),
(4, '2024-05-13', '11:15:00', 799.50, 'PAGO'),
(5, '2024-05-14', '15:00:00', 59.90, 'PENDENTE');



-- Inserts para a Tabela VENDAS

INSERT INTO VENDAS (VENDA_ID, CLI_CPF, PAG_ID)
VALUES
(1, '123.456.789-00', 1),
(2, '987.654.321-00', 2),
(3, '111.222.333-44', 3),
(4, '555.666.777-88', 4),
(5, '444.555.666-77', 5);



-- Inserts para a Tabela VENDAS_PRODUTOS

INSERT INTO VENDAS_PRODUTOS (VENDA_ID, PROD_ID, VEPRO_QTD_VENDIDA, VEPRO_VALORTOTAL)
VALUES
(1, 1, 1, 1999.99),
(2, 2, 2, 1599.00),
(3, 3, 3, 360.00),
(4, 4, 5, 49.95),
(5, 5, 1, 59.90);



-- ----------------------------------------------------------------UPDATES----------------------------------------------------------------



-- Updates para a Tabela CLIENTES

UPDATE CLIENTES SET CLI_STATUS_PROMO = 'REPROVADO' WHERE CLI_CPF = '123.456.789-00'; 
UPDATE CLIENTES SET CLI_CIDADE = 'Rio de Janeiro', CLI_UF = 'RJ' WHERE CLI_CPF = '987.654.321-00'; 
UPDATE CLIENTES SET CLI_NOME = 'Carlos Henrique Oliveira', CLI_BAIRRO = 'Pinheiros' WHERE CLI_CPF = '111.222.333-44'; 
UPDATE CLIENTES SET CLI_STATUS_PROMO = 'APROVADO', CLI_CEP = '04560-000' WHERE CLI_CPF = '555.666.777-88'; 
UPDATE CLIENTES SET CLI_CIDADE = 'Campinas', CLI_UF = 'SP' WHERE CLI_CPF = '444.555.666-77';



-- Updates para a Tabela FORNECEDORES

UPDATE FORNECEDORES SET FORN_TELEFONE = '11 99999-8888' WHERE FORN_CNPJ = '12.345.678/0001-00'; 
UPDATE FORNECEDORES SET FORN_EMAIL = 'fornecedor1@email.com' WHERE FORN_CNPJ = '12.345.678/0001-01'; 
UPDATE FORNECEDORES SET FORN_NOME = 'Fornecedor A' WHERE FORN_CNPJ = '12.345.678/0001-02'; 
UPDATE FORNECEDORES SET FORN_TELEFONE = '21 99888-7777', FORN_EMAIL = 'fornecedorB@email.com' WHERE FORN_CNPJ = '12.345.678/0001-03'; 
UPDATE FORNECEDORES SET FORN_NOME = 'Fornecedor C' WHERE FORN_CNPJ = '12.345.678/0001-04';



-- Updates para a Tabela PRODUTOS

UPDATE PRODUTOS SET PROD_QTDDISPONIVEL = 100, PROD_PRECO = 19.99 WHERE PROD_ID = 1; 
UPDATE PRODUTOS SET PROD_QTDDISPONIVEL = 200, PROD_PRECO = 29.99 WHERE PROD_ID = 2; 
UPDATE PRODUTOS SET PROD_QTDDISPONIVEL = 150, PROD_PRECO = 9.99 WHERE PROD_ID = 3; 
UPDATE PRODUTOS SET PROD_QTDDISPONIVEL = 75, PROD_PRECO = 39.99 WHERE PROD_ID = 4; 
UPDATE PRODUTOS SET PROD_QTDDISPONIVEL = 120, PROD_PRECO = 49.99 WHERE PROD_ID = 5;



-- Updates para a Tabela VENDAS

UPDATE VENDAS SET CLI_CPF = '987.654.321-00', PAG_ID = 2 WHERE VENDA_ID = 1; 
UPDATE VENDAS SET CLI_CPF = '123.456.789-00', PAG_ID = 1 WHERE VENDA_ID = 2; 
UPDATE VENDAS SET CLI_CPF = '444.555.666-77', PAG_ID = 5 WHERE VENDA_ID = 3; 
UPDATE VENDAS SET CLI_CPF = '555.666.777-88', PAG_ID = 4 WHERE VENDA_ID = 4; 
UPDATE VENDAS SET CLI_CPF = '111.222.333-44', PAG_ID = 3 WHERE VENDA_ID = 5;



-- Updates para a Tabela VENDAS_PRODUTOS

UPDATE VENDAS_PRODUTOS SET VEPRO_QTD_VENDIDA = 10, VEPRO_VALORTOTAL = 199.90 WHERE VENDA_ID = 1 AND PROD_ID = 1; 
UPDATE VENDAS_PRODUTOS SET VEPRO_QTD_VENDIDA = 5, VEPRO_VALORTOTAL = 149.95 WHERE VENDA_ID = 2 AND PROD_ID = 2; 
UPDATE VENDAS_PRODUTOS SET VEPRO_QTD_VENDIDA = 3, VEPRO_VALORTOTAL = 29.97 WHERE VENDA_ID = 3 AND PROD_ID = 3; 
UPDATE VENDAS_PRODUTOS SET VEPRO_QTD_VENDIDA = 2, VEPRO_VALORTOTAL = 79.98 WHERE VENDA_ID = 4 AND PROD_ID = 4; 
UPDATE VENDAS_PRODUTOS SET VEPRO_QTD_VENDIDA = 7, VEPRO_VALORTOTAL = 349.93 WHERE VENDA_ID = 5 AND PROD_ID = 5;
